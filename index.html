<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Acceleration Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<canvas id="myChart" width="400" height="200"></canvas>
<script>
    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [],
            datasets: [{
                label: 'X Axis Acceleration',
                data: [],
                borderColor: 'rgba(75, 192, 192, 1)',
                fill: false
            }]
        },
        options: {}
    });

    function fetchAndPlotData() {
        fetch('/acceleration')
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    console.error(data.error);
                    return;
                }
                // 更新图表数据
                let time = data.time;
                let accX = data.accX;
                myChart.data.labels.push(time);
                myChart.data.datasets[0].data.push(accX);
                myChart.update();
            });
    }

    // 每秒更新一次数据
    setInterval(fetchAndPlotData, 1000);
</script>
</body>
</html>